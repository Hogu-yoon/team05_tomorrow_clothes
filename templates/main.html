{% extends "./base.html" %}
{% load static %}


{% block main_head %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width" , initial-scale="1.0">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/main/main.css' %}">
    <script type="text/javascript" src="{% static 'js/main/main.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        let state = false;
        let timer_state = true;
        window.addEventListener('load', function () {
            var t = document.getElementsByTagName('div')[0];
            t.addEventListener('scroll', function () {
                    console.log('timer_state : ' + timer_state)
                    if (timer_state === true) {
                        timer_state = false;
                        setTimeout(function () {
                            scroller_delay();
                            timer_state = true;
                        }, 1000);
                    }
                }
            )


            function scroller_delay() {
                console.log('timer_state2 : ' + timer_state)
                let currentScrollValue = document.getElementById('body_container').scrollTop;
                let ScrollHighValue = document.getElementById('body_container').scrollHeight;
                let actingScroll = ScrollHighValue - currentScrollValue;
                const clientHeight = document.getElementsByTagName('body')[0].clientHeight;
                console.log('스크롤 위치는 :' + currentScrollValue);
                console.log('스크롤 크기는 :' + ScrollHighValue);
                console.log('전체 크기 : ' + clientHeight);
                console.log('스크롤 위치 - 스크롤크기 == 전체크기 : ' + actingScroll);
                if (clientHeight + 10 >= actingScroll) {
                    state = true;
                    console.log('state start ~!!!!!! :' + state);
                }
            }

            function get_page() {
                $.ajax()
            }
        });
    </script>
{% endblock main_head %}


{% block main_header %}
    <div id="header">
        <div class="header-icon"><img src="{% static 'img/upload.png' %}"></div>
        <div class="header-icon"><img src="{% static 'img/hanger.png' %}"></div>
        <div class="header-icon"><img src="{% static 'img/login.png' %}"></div>
    </div>
{% endblock main_header %}


{% block main_body %}
      <div id="container">
        <div class="weather">
            <div class="location">서울시 광양구</div>
            <a href="{% url 'api-1.0.0:login' %}/">aasaaaaaaaaaaa</a>
            <div class="weather-icons">
                <div class="weather-icon">12°C</div>
                <div class="weather-icon">날씨</div>
                <div class="weather-icon">강수</div>
                <div class="weather-icon">미세먼지</div>
            </div>
        </div>
        <div class="images">
            {% for p in test %}
                <div class="image">
                    <img src="{{ p.feeds_img_url.url }}">
                </div>
            {% endfor %}

            {#            {% for i in "x"|rjust:"10" %}#}
            {#                <div class="image"><img src="{% static 'img/chu2.jpg' %}"></div>#}
            {#                <div class="image"><img src="{% static 'img/wonyoung.jpg' %}"></div>#}
            {#                <div class="image"><img#}
            {#                        src="https://i.guim.co.uk/img/sia/ac3752eb2a2a5170e2881b9e47f79f5c60d150a0/0_150_4500_2700/master/4500.jpg?width=465&quality=45&auto=format&fit=max&dpr=2&s=8931e73900fa54622435e86961d7a6cb">#}
            {#                </div>#}
            {#                <div class="image"><img src="{% static 'img/chu.jpeg' %}"></div>#}
            {#                <div class="image"><img#}
            {#                        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7cEjVUtCpQDMdKkIYTB4a17Szz-Gkze0Fjw&usqp=CAU">#}
            {#                </div>#}
            {#            {% endfor %}#}

        </div>
    </div>
    <div id="footer"></div>
{% endblock main_body %}
